<!DOCTYPE html>
<html>
<head>
<title>???</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta
name="description"
content="Victor Devlin music and art">
<link rel="stylesheet" href="style.css" />
<link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />
<script src="/includes/script.js"></script>
</head>
<body>
    <div class="grid-container">
    <header>
        <a href="home.html"><button><h1>ENTER</h1></button></a>
    </header>
    <nav>
        <!--NAV HERE-->
    </nav>
    <main>
        <!--MAIN HERE-->
        <canvas></canvas>
    </main>
    <footer>
        <!--FOOTER HERE-->
    </footer>

    <script>
        var img = new Image();
img.onload = start;
img.src = "https://f4.bcbits.com/img/a3493854148_10.jpg";

function start() {

  var canvas = document.querySelector("canvas");
  var ctx = canvas.getContext("2d");

  function mix(a, b, l) {
    return a + (b - a) * l;
  }
  
  function upDown(v) {
    return Math.sin(v) * 0.5 + 0.5;
  }
  
  function render(time) {
    time *= 0.001;

    resize(canvas);

    var t1 = time;
    var t2 = time * 0.37;

    // for each line in the canvas
    for (var dstY = 0; dstY < canvas.height; ++dstY) {
      
      // v is value that goes 0 to 1 down the canvas
      var v = dstY / canvas.height;
      
      // compute some amount to offset the src
      var off1 = Math.sin((v + 0.5) * mix(3, 12, upDown(t1))) * 300;
      var off2 = Math.sin((v + 0.5) * mix(3, 12, upDown(t2))) * 300;
      var off = off1 + off2;
      
      // compute what line of the source image we want
      // NOTE: if off = 0 then it would just be stretching
      // the image down the canvas.
      var srcY = dstY * img.height / canvas.height + off;
      
      // clamp srcY to be inside the image
      srcY = Math.max(0, Math.min(img.height - 1, srcY));

      // draw a single line from the src to the canvas
      ctx.drawImage(
        img, 
        0, srcY, img.width, 1, 
        0, dstY, canvas.width, 1);
    }    
    
    requestAnimationFrame(render);
  }
  requestAnimationFrame(render);

  function resize(canvas) {
    var width = canvas.clientWidth;
    var height = canvas.clientHeight;
    if (width != canvas.width || height != canvas.height) {
      canvas.width = width;
      canvas.height = height;
    }
  }
}
    </script>
    </body>
</html>